% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compare_ate_methods.R
\name{compare_ate_methods}
\alias{compare_ate_methods}
\title{Compare ATE Estimation Methods on Non-Linear Data}
\usage{
compare_ate_methods(
  data = NULL,
  n = 2000,
  seed = 2026,
  num_trees = 2000,
  verbose = TRUE
)
}
\arguments{
\item{data}{A tibble from \code{\link[=simulate_nonlinear_data]{simulate_nonlinear_data()}}, or NULL to generate
data automatically.}

\item{n}{Integer. Sample size if generating data (default: 2000).}

\item{seed}{Integer. Seed if generating data (default: 2026).}

\item{num_trees}{Integer. Number of trees for the causal forest
(default: 2000).}

\item{verbose}{Logical. Print progress messages (default: TRUE).}
}
\value{
A list with components:
\describe{
\item{summary}{Tibble with one row per method: method name,
ATE estimate, true ATE, and RMSE of individual-level predictions.}
\item{predictions}{Tibble with individual-level predictions from all
methods (columns: tau_true, tau_hat, method, x1, x2, x3).}
\item{plot_comparison}{ggplot2 object: tau_hat vs tau_true scatter,
faceted by method, with 45-degree reference line.}
\item{plot_by_x1}{ggplot2 object: smoothed tau_hat and tau_true vs x1,
faceted by method.}
\item{data}{The input or generated data.}
}
}
\description{
Fits four estimation methods to data with non-linear heterogeneous treatment
effects and compares their ability to recover the true effect surface. With
randomised treatment, estimation error comes purely from functional form
misspecification.
}
\details{
\subsection{Methods compared}{
\enumerate{
\item \strong{OLS (linear):} \code{lm(outcome ~ treatment * (x1 + x2 + x3))}. Assumes
linear interactions. Cannot capture curvature or threshold effects.
\item \strong{Polynomial (degree 3):} \code{lm(outcome ~ treatment * (poly(x1,3) + poly(x2,3) + x3))}. Adds flexibility but remains parametric.
\item \strong{GAM:} \code{mgcv::gam()} with smooth terms and smooth-by-treatment
interactions. Learns non-linear main effects and treatment-covariate
interactions non-parametrically.
\item \strong{Causal forest:} \code{grf::causal_forest()}. Directly targets the
conditional average treatment effect without specifying a functional
form.
}

Individual treatment effects (tau_hat) are obtained via G-computation for
the regression-based methods (predict under treatment = 1 minus predict
under treatment = 0) and via direct prediction for the causal forest.
}

\subsection{Dependencies}{

Requires \code{mgcv} (ships with R) and \code{grf} (package dependency).
}
}
\examples{
\donttest{
results <- compare_ate_methods(n = 500, seed = 42)
results$summary
results$plot_comparison
}

}
\seealso{
\code{\link[=simulate_nonlinear_data]{simulate_nonlinear_data()}}
}
